{"version":3,"file":"common-list.js","sources":["components/common/common-list.vue","../../AppGallery/HBuilderX.4.75.2025070414-alpha/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjovcHJvamVjdC_npL7ljLrkuqTlj4svY29tcG9uZW50cy9jb21tb24vY29tbW9uLWxpc3QudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"p-2\">\r\n\t\t<!-- 头像 昵称 | 关注按钮 -->\r\n\t\t<view class=\"flex align-center justify-between\"> \r\n\t\t\t<view  class=\"flex align-center\" >\r\n\t\t\t<!-- 头像 -->\r\n\t\t\t\t<image class=\"mr-2 rounded-circle\" :src=\"item.userpic\" style=\"width: 65rpx;height: 65rpx;\" lazy-load @click=\"openSpace(item.user_id)\"></image>\r\n\t\t\t\t<!-- 昵称发布时间 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"font\" style=\"line-height: 25rpx;\" @click=\"openSpace(item.user_id)\">{{item.username}}</view>\r\n\t\t\t\t\t<text class=\"font-sm text-light-muted\" style=\"line-height: 25rpx;\">{{item.nowstime}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 按钮 -->\r\n\t\t\t<view class=\"flex align-center justify-center rounded text-white bg-color animated faster\" \r\n\t\t\tstyle=\"width: 90rpx;height: 50rpx;\" hover-class=\"rubberBand\" @click=\"follow\" \r\n\t\t\tv-if=\"!item.isFollow && user.id !== item.user_id\">\r\n\t\t\t关注\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 标题 -->\r\n\t\t<view class=\"font my-2\" @click=\"openDetail\">{{item.title}}</view>\r\n\t\t<!-- 帖子详情 -->\r\n\t\t<slot>\r\n\t\t\t<!-- 图片 -->\r\n\t\t\t<image v-if=\"item.titlepic\" calss=\"rounded\" :src=\"item.titlepic\" \r\n\t\t\tstyle=\"height: 350rpx;width: 100%;\" @click=\"openDetail\" mode=\"widthFix\"></image>\r\n\t\t</slot>\r\n\t\t<!-- 图标按钮 -->\r\n\t\t<view class=\"flex align-center\">\r\n\t\t\t<!-- 顶 -->\r\n\t\t\t<view class=\"flex align-center justify-center flex-1 animated faster\" \r\n\t\t\thover-class=\"jello color-global\" @click=\"liked('liked')\" \r\n\t\t\t:class=\"item.liked.type === 'liked' ? 'liked-active':''\">\r\n\t\t\t\t<text class=\"iconfont icon-icon mr-1\"></text>\r\n\t\t\t\t<text>{{item.liked.liked_count > 0 ? item.liked.liked_count : '赞'}}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 踩 -->\r\n\t\t\t<view class=\"flex align-center justify-center flex-1 animated faster\" \r\n\t\t\thover-class=\"jello color-global\" @click=\"liked('disliked')\"\r\n\t\t\t:class=\"item.liked.type === 'disliked' ? 'liked-active':''\">\r\n\t\t\t\t<text class=\"iconfont icon-anniucai mr-1\"></text>\r\n\t\t\t\t<text>{{item.liked.disliked_count > 0 ? item.liked.disliked_count : '踩'}}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 评论 -->\r\n\t\t\t<view class=\"flex align-center justify-center flex-1 animated faster\" \r\n\t\t\thover-class=\"jello color-global\" @click=\"doComment\">\r\n\t\t\t\t<text class=\"iconfont icon-pinglun2 mr-1\"></text>\r\n\t\t\t\t<text>{{item.comment_count > 0 ? item.comment_count : '评论'}}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 分享 -->\r\n\t\t\t<view class=\"flex align-center justify-center flex-1 animated faster\" \r\n\t\t\thover-class=\"jello color-global\" @click=\"shared\">\r\n\t\t\t\t<text class=\"iconfont icon-zhuanfa1 mr-1\"></text>\r\n\t\t\t\t<text>{{item.share_count > 0 ? item.share_count : '分享'}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport { mapState } from 'vuex'\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\titem: Object,\r\n\t\t\tindex:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:-1\r\n\t\t\t},\r\n\t\t\tisdetail:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tuser:state=>state.user \r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//打开个人空间\r\n\t\t\topenSpace(user_id){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/user-space/user-space?user_id='+user_id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//打开详情页\r\n\t\t\topenDetail(){\r\n\t\t\t\t// 处于详情页中\r\n\t\t\t\tif (this.isdetail) return;\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/post-detail/post-detail?detail='+JSON.stringify(this.item)\r\n\t\t\t\t});\r\n\t\t\t\t// 取出历史记录\r\n\t\t\t\tlet list = uni.getStorageSync('history')\r\n\t\t\t\tlist = list ? JSON.parse(list) : []\r\n\t\t\t\tlet index = list.findIndex(v=>v.id === this.item.id)\r\n\t\t\t\tif(index === -1){\r\n\t\t\t\t\tlist.unshift(this.item)\r\n\t\t\t\t\tuni.setStorageSync('history',JSON.stringify(list))\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//关注操作\r\n\t\t\tfollow(){\r\n\t\t\t\tthis.checkAuth(()=>{\r\n\t\t\t\t\tthis.$H.post('/follow',{\r\n\t\t\t\t\t\tfollow_id:this.item.user_id\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t// 通知更新\r\n\t\t\t\t\t\tuni.$emit('updateFollowOrLiked',{\r\n\t\t\t\t\t\t\ttype:\"follow\",\r\n\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\tuser_id:this.item.user_id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '关注失败',\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//顶踩操作\r\n\t\t\tliked(type){\r\n\t\t\t\tthis.checkAuth(()=>{\r\n\t\t\t\t\tthis.$H.post('/liked',{\r\n\t\t\t\t\t\tpost_id:this.item.id,\r\n\t\t\t\t\t\ttype:type === 'liked' ? 0 : 1\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\ttoken:true,\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tif(res.data.errorCode) {\r\n\t\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t// 通知父组件\r\n\t\t\t\t\tuni.$emit('updateFollowOrLiked',{\r\n\t\t\t\t\t\ttype:\"liked\",\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\ttype:type,\r\n\t\t\t\t\t\t\tid:this.item.id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 评论\r\n\t\t\tdoComment(){\r\n\t\t\t\tthis.checkAuth(()=>{\r\n\t\t\t\t\tif (this.isdetail) {\r\n\t\t\t\t\t\treturn this.openDetail()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$emit('doComment')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//分享操作\r\n\t\t\tshared(){\r\n\t\t\t\tif (this.isdetail) {\r\n\t\t\t\t\treturn this.openDetail()\r\n\t\t\t\t}\r\n\t\t\t\tthis.$emit('shared')\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\t.liked-active{\r\n\t\tcolor: #1296db;\r\n\t}\n</style>","import Component from 'F:/project/社区交友/components/common/common-list.vue'\nwx.createComponent(Component)"],"names":["mapState","uni"],"mappings":";;AA8DC,MAAK,YAAU;AAAA,EACd,OAAO;AAAA,IACN,MAAM;AAAA,IACN,OAAM;AAAA,MACL,MAAK;AAAA,MACL,SAAQ;AAAA,IACR;AAAA,IACD,UAAS;AAAA,MACR,MAAK;AAAA,MACL,SAAQ;AAAA,IACT;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,GAAGA,uBAAS;AAAA,MACX,MAAK,WAAO,MAAM;AAAA,KAClB;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAER,UAAU,SAAQ;AACjBC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAI,0CAAwC;AAAA,OAC5C;AAAA,IACD;AAAA;AAAA,IAED,aAAY;AAEX,UAAI,KAAK;AAAU;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAI,2CAAyC,KAAK,UAAU,KAAK,IAAI;AAAA,MACtE,CAAC;AAED,UAAI,OAAOA,cAAAA,MAAI,eAAe,SAAS;AACvC,aAAO,OAAO,KAAK,MAAM,IAAI,IAAI,CAAC;AAClC,UAAI,QAAQ,KAAK,UAAU,OAAG,EAAE,OAAO,KAAK,KAAK,EAAE;AACnD,UAAG,UAAU,IAAG;AACf,aAAK,QAAQ,KAAK,IAAI;AACtBA,sBAAG,MAAC,eAAe,WAAU,KAAK,UAAU,IAAI,CAAC;AAAA,MAClD;AAAA,IACA;AAAA;AAAA,IAED,SAAQ;AACP,WAAK,UAAU,MAAI;AAClB,aAAK,GAAG,KAAK,WAAU;AAAA,UACtB,WAAU,KAAK,KAAK;AAAA,QACrB,GAAE;AAAA,UACD,OAAM;AAAA,SACN,EAAE,KAAK,SAAK;AAEZA,wBAAG,MAAC,MAAM,uBAAsB;AAAA,YAC/B,MAAK;AAAA,YACL,MAAK;AAAA,cACJ,SAAQ,KAAK,KAAK;AAAA,YACnB;AAAA,WACA;AAAA,QACF,CAAC,EAAE,MAAM,SAAK;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAK;AAAA,UACN,CAAC;AAAA,SACD;AAAA,OACD;AAAA,IACD;AAAA;AAAA,IAED,MAAM,MAAK;AACV,WAAK,UAAU,MAAI;AAClB,aAAK,GAAG,KAAK,UAAS;AAAA,UACrB,SAAQ,KAAK,KAAK;AAAA,UAClB,MAAK,SAAS,UAAU,IAAI;AAAA,QAC7B,GAAE;AAAA,UACD,OAAM;AAAA,SACN,EAAE,KAAK,SAAK;AACZ,cAAG,IAAI,KAAK,WAAW;AACtB,mBAAOA,cAAAA,MAAI,UAAU;AAAA,cACpB,OAAO,IAAI,KAAK;AAAA,cAChB,MAAK;AAAA,YACN,CAAC;AAAA,UACF;AAEDA,wBAAG,MAAC,MAAM,uBAAsB;AAAA,YAC/B,MAAK;AAAA,YACL,MAAK;AAAA,cACJ;AAAA,cACA,IAAG,KAAK,KAAK;AAAA,YACd;AAAA,WACC;AAAA,SACD;AAAA,OACD;AAAA,IACD;AAAA;AAAA,IAED,YAAW;AACV,WAAK,UAAU,MAAI;AAClB,YAAI,KAAK,UAAU;AAClB,iBAAO,KAAK,WAAW;AAAA,QACxB;AACA,aAAK,MAAM,WAAW;AAAA,OACtB;AAAA,IACD;AAAA;AAAA,IAED,SAAQ;AACP,UAAI,KAAK,UAAU;AAClB,eAAO,KAAK,WAAW;AAAA,MACxB;AACA,WAAK,MAAM,QAAQ;AAAA,IACpB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvKD,GAAG,gBAAgB,SAAS;"}