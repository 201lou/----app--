{"version":3,"file":"find.js","sources":["pages/find/find.vue","../../AppGallery/HBuilderX.4.75.2025070414-alpha/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZmluZC9maW5kLnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<!-- 导航 -->\r\n\t\t<uni-nav-bar :border=\"false\" :fixed=\"true\" statusBar=\"true\" @clickRight=\"openInput\">\r\n\t\t\t<view class=\"flex align-center justify-center font-weight-bold w-100\">\r\n\t\t\t\t<!-- <view class=\"font-lg color-global mx-1\">关注</view> -->\r\n\t\t\t\t<view class=\"font-md text-light-muted mx-1\"  @click=\"changeTab(index)\"\r\n\t\t\t\tv-for=\"(item,index) in tabBar\" :key=\"index\" \r\n\t\t\t\t:class=\"tabIndex === index ? 'font-lg color-global':'font-md text-light-muted'\">{{item.name}}</view>\r\n\t\t\t</view>\r\n\t\t\t<template v-slot:right>\r\n\t\t\t\t<text class=\"iconfont icon-fabu1\"></text>\r\n\t\t\t</template>\r\n\t\t</uni-nav-bar>\r\n\t\t\r\n\t\t<!-- 划动界面 -->\r\n\t\t<swiper :current=\"tabIndex\" :duration=\"150\" @change=\"onChangeTab\" :style=\"'height:'+scrollH+'px;'\">\r\n\t\t\t<!-- 关注 -->\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y=\"true\" :style=\"'height:'+scrollH+'px;'\" \r\n\t\t\t\t@scrolltolower=\"loadmoreEvent\">\r\n\t\t\t\t\t<block v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t<common-list :item=\"item\" :index=\"index\" @liked=\"liked\"></common-list>\r\n\t\t\t\t\t\t<view class=\"divider\"></view>\t\t\t\t\t\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<load-more v-if=\"list.length\" :loadmore=\"loadmore\"></load-more>\r\n\t\t\t\t\t<no-thing v-else></no-thing>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t\t<!-- 话题 -->\r\n\t\t\t<swiper-item>\t\t\t\t\r\n\t\t\t\t<scroll-view scroll-y=\"true\" :style=\"'height:'+scrollH+'px;'\">\r\n\t\t\t\t\t<!-- 热门分类 -->\r\n\t\t\t\t\t<hot-click :hotClick=\"hotClick\"></hot-click>\r\n\t\t\t\t\t<!-- 搜索框 -->\r\n\t\t\t\t\t<view class=\"p-2\">\r\n\t\t\t\t\t\t<view class=\"color-aliceblue rounded flex align-center justify-center py-2 text-secondary\" @click=\"openSearch()\">\r\n\t\t\t\t\t\t\t<text class=\"iconfont icon-sousuo mr-2\"></text>\r\n\t\t\t\t\t\t\t搜索话题\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 轮播图 -->\r\n\t\t\t\t\t<swiper class=\"px-2 pb-2\" :indicator-dots=\"true\" :autoplay=\"true\" \r\n\t\t\t\t\t:interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t\t<swiper-item v-for=\"(item,index) in swiperList\" :key=\"index\">\r\n\t\t\t\t\t\t\t<image :src=\"item.src\"\r\n\t\t\t\t\t\t\tstyle=\"height: 300rpx;\" class=\"w-100 rounded\"></image>\r\n\t\t\t\t\t\t</swiper-item>\t\t\t\t\t\t\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t\t<view class=\"divider\"></view>\r\n\t\t\t\t\t<!-- 最近更新 -->\r\n\t\t\t\t\t<view class=\"p-2 font-md\">最近更新</view>\r\n\t\t\t\t\t<!-- 话题列表组件 -->\r\n\t\t\t\t\t<block v-for=\"(item,index) in topicList\" :key=\"index\">\r\n\t\t\t\t\t\t<topic-list :item=\"item\" :index=\"index\"></topic-list>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport uniNavBar from '@/components/uni-uni/uni-nav-bar/uni-nav-bar.vue';\r\n\timport commonList from '@/components/common/common-list.vue';\r\n\timport loadMore from '@/components/common/load-more.vue';\r\n\timport hotClick from '@/components/find/hot-click.vue';\r\n\timport topicList from '@/components/find/topic-list.vue';\r\n\timport noThing from '@/components/common/no-thing.vue';\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tuniNavBar,\r\n\t\t\tcommonList,\r\n\t\t\tloadMore,\r\n\t\t\thotClick,\r\n\t\t\ttopicList,\r\n\t\t\tnoThing\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tscrollH : 500,\r\n\t\t\t\ttabIndex : 0,\n\t\t\t\ttabBar:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:'关注'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:'话题'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tlist : [],\r\n\t\t\t\tloadmore : \"上拉加载更多\",\r\n\t\t\t\tpage:1,\r\n\t\t\t\thotClick:[],\r\n\t\t\t\ttopicList:[],\r\n\t\t\t\tswiperList:[]\n\t\t\t}\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\tthis.scrollH = res.windowHeight - res.statusBarHeight -44\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 获取数据\r\n\t\t\tthis.getTopicNav()\r\n\t\t\tthis.getHotTopic()\r\n\t\t\tthis.getSwipers()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.page = 1\r\n\t\t\tthis.getList()\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t// 获取关注好友文章列表\r\n\t\t\tgetList(){\r\n\t\t\t\tlet isrefresh = this.page === 1\r\n\t\t\t\tthis.$H.get('/followpost/'+this.page,{},{\r\n\t\t\t\t\ttoken:true,\r\n\t\t\t\t\tnotoast:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tlet list = res.data.data.list.map(v=>{\r\n\t\t\t\t\t\treturn this.$U.formatCommonList(v)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.list = isrefresh ? list : [...this.list,...list],\r\n\t\t\t\t\tthis.loadmore = list.length < 10 ?'没有更多了' : '上拉加载更多'\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tif (!isrefresh) {\r\n\t\t\t\t\t\tthis.page--\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取热门分类\r\n\t\t\tgetTopicNav(){\r\n\t\t\t\tthis.$H.get('/topicclass').then(res=>{\r\n\t\t\t\t\tthis.hotClick = res.data.data.list.map(item=>{\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid:item.id,\r\n\t\t\t\t\t\t\tname:item.classname\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取热门话题\r\n\t\t\tgetHotTopic(){\r\n\t\t\t\tthis.$H.get('/hottopic').then(res=>{\r\n\t\t\t\t\tthis.topicList = res.data.data.list.map(item=>{\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid:item.id,\r\n\t\t\t\t\t\t\tcover:item.titlepic,\r\n\t\t\t\t\t\t\ttitle:item.title,\r\n\t\t\t\t\t\t\tdesc:item.desc,\r\n\t\t\t\t\t\t\ttoday_count:item.today_count,\r\n\t\t\t\t\t\t\tnews_count:item.post_count\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取轮播图\r\n\t\t\tgetSwipers(){\r\n\t\t\t\tthis.$H.get('/adsense/0').then(res=>{\r\n\t\t\t\t\tthis.swiperList = res.data.data.list\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\t// 打开发布页\r\n\t\t\topenInput(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/add-input/add-input'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//切换选项\r\n\t\t\tchangeTab(index){\r\n\t\t\t\tthis.tabIndex = index\r\n\t\t\t},\r\n\t\t\t// 滑动切换\r\n\t\t\tonChangeTab(e) {\r\n\t\t\t\tthis.tabIndex = e.detail.current\r\n\t\t\t},\r\n\t\t\t// 赞踩事件\r\n\t\t\tliked(e){\r\n\t\t\t\t//拿到当前对象\r\n\t\t\t\tlet item = this.list[e.index];\r\n\t\t\t\tlet msg = e.type === 'liked' ? '赞':'踩'\r\n\t\t\t\t//之前没操作过\r\n\t\t\t\tif (item.liked.type === ''){\r\n\t\t\t\t\titem.liked[e.type+'_count']++\r\n\t\t\t\t\t}\r\n\t\t\t\telse if (item.liked.type === 'liked' && e.type === 'disliked'){\r\n\t\t\t\t\titem.liked.liked_count--;\r\n\t\t\t\t\titem.liked.disliked_count++;\r\n\t\t\t\t}\r\n\t\t\t\telse if(item.liked.type === 'disliked' && e.type === 'liked'){\r\n\t\t\t\t\titem.liked.liked_count++;\r\n\t\t\t\t\titem.liked.disliked_count--;\r\n\t\t\t\t}\r\n\t\t\t\titem.liked.type = e.type\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:msg+'成功'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 上拉加载\r\n\t\t\tloadmoreEvent() {\r\n\t\t\t\t// 验证当前是否处于可加载状态\r\n\t\t\t\tif (this.loadmore !== '上拉加载更多') return;\r\n\t\t\t\t// 设置加载状态\r\n\t\t\t\tthis.loadmore = '加载中'\r\n\t\t\t\t// 请求数据\r\n\t\t\t\tthis.page++\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\t// 打开搜索页\r\n\t\t\topenSearch(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/search/search?type=topic'\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n","import MiniProgramPage from 'F:/project/社区交友/pages/find/find.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}