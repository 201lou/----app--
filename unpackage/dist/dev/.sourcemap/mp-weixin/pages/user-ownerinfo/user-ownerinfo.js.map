{"version":3,"file":"user-ownerinfo.js","sources":["pages/user-ownerinfo/user-ownerinfo.vue","../../AppGallery/HBuilderX.4.75.2025070414-alpha/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci1vd25lcmluZm8vdXNlci1vd25lcmluZm8udnVl"],"sourcesContent":["<template>\n\t<view>\n\t\t<uni-list>\r\n\t\t\t<uni-list-item title=\"头像\" @click=\"changeUserpic\">\r\n\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t<image :src=\"userpic\" \r\n\t\t\t\t\tstyle=\"width: 100rpx;height: 100rpx;\"\r\n\t\t\t\t\tclass=\"rounded-circle\"></image>\r\n\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t\t<uni-list-item title=\"昵称\">\r\n\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t<input class=\"uni-input text-right\" v-model=\"username\" />\r\n\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t\t<uni-list-item title=\"性别\" @click=\"changeGender\">\r\n\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t<text>{{genderText}}</text>\r\n\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t\t<picker mode=\"date\" :value=\"birthday\" @change=\"onDateChange\">\r\n\t\t\t\t<uni-list-item title=\"生日\">\r\n\t\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t\t<text>{{birthday}}</text>\r\n\t\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</uni-list-item>\r\n\t\t\t</picker>\t\t\t\r\n\t\t\t<uni-list-item title=\"情感\" @click=\"changeRelation\">\r\n\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t<text>{{relationText}}</text>\r\n\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t\t<uni-list-item title=\"职业\" @click=\"changeJob\">\r\n\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t<text>{{job}}</text>\r\n\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t\t<uni-list-item title=\"家乡\" @click=\"showCityPicker\">\r\n\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t<text>{{pickerText}}</text>\r\n\t\t\t\t\t<text class=\"iconfont icon-bianji1 ml-2\"></text>\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t</uni-list>\r\n\t\t<view class=\"py-2 px-3\">\r\n\t\t\t<button class=\"bg-color text-white\" style=\"border-radius: 50rpx;border: 0;\"\r\n\t\t\ttype=\"primary\" @click=\"submit\">完成</button>\r\n\t\t</view>\r\n\t\t\r\n\t\t<mpvue-city-picker :themeColor=\"themeColor\" ref=\"mpvueCityPicker\" \r\n\t\t:pickerValueDefault=\"cityPickerValueDefault\" @onConfirm=\"onConfirm\"></mpvue-city-picker>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\tconst genderArray = ['男','女','保密']\r\n\tconst relationArray = ['保密','未婚','已婚']\r\n\timport uniListItem from '@/components/uni-uni/uni-list-item/uni-list-item.vue';\r\n\timport uniList from '@/components/uni-uni/uni-list/uni-list.vue';\r\n\timport mpvueCityPicker from '@/components/uni-uni/mpvue-citypicker/mpvueCityPicker.vue';\r\n\timport { mapState } from 'vuex'\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniList,\r\n\t\t\tuniListItem,\r\n\t\t\tmpvueCityPicker\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuserpic:\"/static/common/demo6.jpg\",\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tgender:2,\r\n\t\t\t\trelation:0,\r\n\t\t\t\tjob:\"保密\",\r\n\t\t\t\tbirthday:\"\",\r\n\t\t\t\tpickerText:\"\",\r\n\t\t\t\tthemeColor:'#007AFF',\r\n\t\t\t\tcityPickerValueDefault:[0,0,1],\r\n\t\t\t\t\n\t\t\t}\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tlet userinfo = this.user.userinfo\r\n\t\t\tif(userinfo){\r\n\t\t\t\tthis.pickerText = userinfo.path\r\n\t\t\t\tthis.username = this.user.username\r\n\t\t\t\tthis.gender =  userinfo.sex\r\n\t\t\t\tthis.relation = userinfo.qg\r\n\t\t\t\tthis.job  = userinfo.job\r\n\t\t\t\tthis.birthday  = userinfo.birthday\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tuser:state=>state.user\r\n\t\t\t}),\r\n\t\t\tgenderText() {\r\n\t\t\t\treturn genderArray[this.gender] \r\n\t\t\t},\r\n\t\t\trelationText() {\r\n\t\t\t\treturn relationArray[this.relation]\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\r\n\t\t\tshowCityPicker() {\r\n\t\t\t\tthis.$refs.mpvueCityPicker.show()\r\n\t\t\t},\r\n\t\t\t// 三级联动提交事件\r\n\t\t\tonConfirm(e) {\r\n\t\t\t\tthis.pickerText = e.label\r\n\t\t\t},\r\n\t\t\t// 修改生日\r\n\t\t\tonDateChange(e) {\r\n\t\t\t\tthis.birthday = e.detail.value\r\n\t\t\t},\n\t\t\t// 修改头像\r\n\t\t\tchangeUserpic() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount:1,\r\n\t\t\t\t\tsizeType:[\"compressed\"],\r\n\t\t\t\t\tsourceType:[\"album\",\"camera\"],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.$H.upload('/edituserpic',{\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePaths[0],\r\n\t\t\t\t\t\t\tname: 'userpic',\r\n\t\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t\t}).then(result=>{\r\n\t\t\t\t\t\t\t// console.log(result);\r\n\t\t\t\t\t\t\tthis.$store.commit('editUserInfo',{\r\n\t\t\t\t\t\t\t\tkey:\"userpic\",\r\n\t\t\t\t\t\t\t\tvalue:result.data\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '修改头像成功',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 修改性别\r\n\t\t\tchangeGender() {\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: genderArray,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.gender = res.tapIndex\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 修改情感状态\r\n\t\t\tchangeRelation() {\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList:relationArray,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.relation = res.tapIndex\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 修改职业\r\n\t\t\tchangeJob() {\r\n\t\t\t\tlet jobArray = ['IT','教师','学生']\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList:jobArray,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.job = jobArray[res.tapIndex]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 提交\r\n\t\t\tsubmit() {\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tname:this.username,\r\n\t\t\t\t\tsex:this.gender,\r\n\t\t\t\t\tqg:this.relation,\r\n\t\t\t\t\tjob:this.job,\r\n\t\t\t\t\tbirthday:this.birthday,\r\n\t\t\t\t\tpath:this.pickerText\r\n\t\t\t\t}\r\n\t\t\t\tthis.$H.post('/edituserinfo',obj,{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.$store.commit('editUserInfo',{\r\n\t\t\t\t\t\tkey:\"username\",\r\n\t\t\t\t\t\tvalue:this.username\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$store.commit('editUserUserInfo',obj)\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta:1\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'修改资料成功',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n","import MiniProgramPage from 'F:/project/社区交友/pages/user-ownerinfo/user-ownerinfo.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapState","uni"],"mappings":"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"}