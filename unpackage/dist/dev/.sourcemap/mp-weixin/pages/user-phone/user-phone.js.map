{"version":3,"file":"user-phone.js","sources":["pages/user-phone/user-phone.vue","../../AppGallery/HBuilderX.4.75.2025070414-alpha/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci1waG9uZS91c2VyLXBob25lLnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<view class=\"mb-2 flex align-stretch\">\r\n\t\t\t<view class=\"border-bottom flex align-center justify-center font px-2\">+86</view>\r\n\t\t\t<input type=\"text\" v-model=\"phone\" placeholder=\"手机号\" class=\"border-bottom p-2 flex-1\"/>\r\n\t\t</view>\r\n\t\t<view class=\"mb-2 flex align-stretch\">\r\n\t\t\t<input type=\"text\" v-model=\"code\" placeholder=\"请输入验证码\" class=\"border-bottom p-2 flex-1\"/>\r\n\t\t\t<view class=\"border-bottom flex align-center justify-center font-sm text-white\" \r\n\t\t\tstyle=\"width: 180rpx;\" :class=\"codeTime > 0 ?'bg-color-disabled':'bg-color'\"\r\n\t\t\t@click=\"getCode\">{{codeTime > 0 ? codeTime+'s':'获取验证码'}}</view>\r\n\t\t</view>\r\n\t\t<view class=\"py-2 px-3\">\r\n\t\t\t<button class=\"bg-color text-white\" style=\"border-radius: 50rpx;border: 0;\"\r\n\t\t\ttype=\"primary\" :disabled=\"disabled\" :class=\"disabled ? 'bg-color-disabled' : ''\"\r\n\t\t\t@click=\"submit\">绑定</button>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tphone:\"\",\r\n\t\t\t\tcode:\"\",\r\n\t\t\t\tcodeTime:0,\n\t\t\t}\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tdisabled() {\r\n\t\t\t\treturn this.phone === '' || this.code === ''\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\n\t\t\t// 验证密码\r\n\t\t\tcheck() {\r\n\t\t\t\tvar rule = /^1[3-9]\\d{9}$/;\t\t\t\t\r\n\t\t\t\tif(!rule.test(this.phone)) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'手机号格式不正确',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tif(!this.check()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$H.post('/user/bindphone',{\r\n\t\t\t\t\tphone:this.phone,\r\n\t\t\t\t\tcode:this.code\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.$store.commit('ediUserInfo',{\r\n\t\t\t\t\t\tkey:'phone',\r\n\t\t\t\t\t\tvalue:this.phone\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta:1\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'修改成功',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tgetCode() {\r\n\t\t\t\t// 防止重复获取\r\n\t\t\t\tif(this.codeTime >0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 验证手机号\r\n\t\t\t\tif(!this.check()) return\r\n\t\t\t\t// 倒计时\r\n\t\t\t\tthis.codeTime = 60\r\n\t\t\t\tlet timer = setInterval(()=>{\r\n\t\t\t\t\tif(this.codeTime >= 1){\r\n\t\t\t\t\t\tthis.codeTime--\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.codeTime = 0\r\n\t\t\t\t\t\tclearInterval(timer)\r\n\t\t\t\t\t}\r\n\t\t\t\t},1000)\r\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n","import MiniProgramPage from 'F:/project/社区交友/pages/user-phone/user-phone.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAqBC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAM;AAAA,MACN,MAAK;AAAA,MACL,UAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,UAAS;AAAA,IACR,WAAW;AACV,aAAO,KAAK,UAAU,MAAM,KAAK,SAAS;AAAA,IAC3C;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,QAAQ;AACP,UAAI,OAAO;AACX,UAAG,CAAC,KAAK,KAAK,KAAK,KAAK,GAAG;AAC1BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAM;AAAA,UACN,MAAK;AAAA,SACL;AACD,eAAO;AAAA,MACR;AACA,aAAO;AAAA,IACP;AAAA,IACD,SAAS;AACR,UAAG,CAAC,KAAK,SAAS;AACjB;AAAA,MACD;AACA,WAAK,GAAG,KAAK,mBAAkB;AAAA,QAC9B,OAAM,KAAK;AAAA,QACX,MAAK,KAAK;AAAA,MACX,GAAE;AAAA,QACD,OAAM;AAAA,OACN,EAAE,KAAK,SAAK;AACZ,aAAK,OAAO,OAAO,eAAc;AAAA,UAChC,KAAI;AAAA,UACJ,OAAM,KAAK;AAAA,SACX;AACDA,sBAAAA,MAAI,aAAa;AAAA,UAChB,OAAM;AAAA,SACN;AACDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAM;AAAA,UACN,MAAK;AAAA,SACL;AAAA,OACD;AAAA,IACD;AAAA;AAAA,IAED,UAAU;AAET,UAAG,KAAK,WAAU,GAAG;AACpB;AAAA,MACD;AAEA,UAAG,CAAC,KAAK,MAAK;AAAI;AAElB,WAAK,WAAW;AAChB,UAAI,QAAQ,YAAY,MAAI;AAC3B,YAAG,KAAK,YAAY,GAAE;AACrB,eAAK;AAAA,eACA;AACL,eAAK,WAAW;AAChB,wBAAc,KAAK;AAAA,QACpB;AAAA,MACA,GAAC,GAAI;AAAA,IACN;AAAA,EACF;AACD;;;;;;;;;;;;;;;;ACzFD,GAAG,WAAW,eAAe;"}